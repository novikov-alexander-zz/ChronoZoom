var CZ;(function(n){(function(t){function c(n){return window.location.protocol=="https:"&&(n=n.replace(/^http:/,"https:")),n}function r(n){var t=n,i=!1;Object.defineProperty(this,"url",{configurable:!1,get:function(){return t}});this.addToPath=function(n){n&&(t+=t.match(/\/$/)?n:"/"+n)};this.addParameter=function(n,r){r!==undefined&&r!==null&&(t+=i?"&":"?",t+=n+"="+r,i=!0)};this.addParameters=function(n){for(var t in n)n.hasOwnProperty(t)&&this.addParameter(t,n[t])}}function l(t){if(typeof t=="undefined")throw"exportTimelines(topmostTimelineId) requires a parameter.";if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)==!1&&t!="00000000-0000-0000-0000-000000000000")throw"exportTimelines(topmostTimelineId) has an invalid parameter. The provided parameter must be a GUID.";n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath("export"),u.addToPath("timeline"),u.addToPath(t),$.ajax({type:"GET",cache:!1,url:u.url,dataType:"json"})}function a(t,u){if(typeof t=="undefined"||typeof u=="undefined")throw"importTimelines(intoTimelineId, newTimelineTree) is missing a parameter.";if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)==!1&&t!="00000000-0000-0000-0000-000000000000")throw"importTimelines(intoTimelineId, newTimelineTree) has an invalid intoTimelineId parameter. This must be a GUID.";if(typeof u!="string")throw"importTimelines(intoTimelineId, newTimelineTree) has an invalid newTimelineTree parameter. This must be a JSON.stringify string.";n.Authoring.resetSessionTimer();var f=new r(i);return f.addToPath("import"),f.addToPath("timeline"),f.addToPath(t),$.ajax({type:"PUT",cache:!1,url:f.url,contentType:"application/json",dataType:"json",data:u})}function v(t){if(typeof t=="undefined")throw"exportExhibit(exhibitId) requires a parameter.";if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)==!1&&t!="00000000-0000-0000-0000-000000000000")throw"exportExhibit(exhibitId) has an invalid parameter. The provided parameter must be a GUID.";n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath("export"),u.addToPath("exhibit"),u.addToPath(t),$.ajax({type:"GET",cache:!1,url:u.url,dataType:"json"})}function y(t,u){if(typeof t=="undefined"||typeof u=="undefined")throw"importExhibit(intoTimelineId, newExhibit) is missing a parameter.";if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)==!1&&t!="00000000-0000-0000-0000-000000000000")throw"importExhibit(intoTimelineId, newExhibit) has an invalid intoTimelineId parameter. This must be a GUID.";if(typeof u!="string")throw"importExhibit(intoTimelineId, newExhibit) has an invalid newTimelineTree parameter. This must be a JSON.stringify string.";n.Authoring.resetSessionTimer();var f=new r(i);return f.addToPath("import"),f.addToPath("exhibit"),f.addToPath(t),$.ajax({type:"PUT",cache:!1,url:f.url,contentType:"application/json",dataType:"json",data:u})}function p(t){if(typeof t!="string")throw"importCollection(collectionTree) missing the collectionTree parameter.";n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath("import"),u.addToPath("collection"),$.ajax({type:"PUT",cache:!1,url:u.url,contentType:"application/json",dataType:"json",data:t})}function w(u,f){typeof u=="undefined"&&(u=t.superCollectionName);typeof f=="undefined"&&(f=t.collectionName);n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath("getroot"),e.addParameter("supercollection",u),e.addParameter("collection",f),$.ajax({type:"GET",cache:!1,dataType:"json",url:e.url})}function b(u,f,e){typeof f=="undefined"&&(f=t.superCollectionName);typeof e=="undefined"&&(e=t.collectionName);n.Authoring.resetSessionTimer();var o=new r(i);return o.addToPath("gettimelines"),o.addParameter("supercollection",f),o.addParameter("collection",e),o.addParameters(u),$.ajax({type:"GET",cache:!1,dataType:"json",url:o.url})}function k(){n.Authoring.resetSessionTimer();var t=new r(i);return t.addToPath("supercollections"),$.ajax({type:"GET",cache:!1,dataType:"json",url:t.url})}function d(t){n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath(t),u.addToPath("collections"),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function g(){n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&u.addToPath(t.collectionName),u.addToPath("data"),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function nt(u){if(typeof u=="undefined")return!1;n.Authoring.resetSessionTimer();var f=new r(i);return typeof t.superCollectionName!="undefined"&&f.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&f.addToPath(t.collectionName),f.addToPath("isuniquecollectionname"),f.addParameter("new",encodeURIComponent(u)),$.ajax({type:"GET",cache:!1,dataType:"json",url:f.url})}function tt(t){n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath("exhibit"),u.addToPath(t),u.addToPath("lastupdate"),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function it(t){n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath("find"),u.addToPath("users?partial="+t),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function rt(){n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&u.addToPath(t.collectionName),u.addToPath("canedit"),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function ut(){n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&u.addToPath(t.collectionName),u.addToPath("members"),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function ft(u,f,e){n.Authoring.resetSessionTimer();var o=new r(i);return o.addToPath(u),typeof t.collectionName!="undefined"&&o.addToPath(f),o.addToPath("members"),$.ajax({type:"PUT",cache:!1,contentType:"application/json",dataType:"json",url:o.url,data:JSON.stringify(e)})}function et(u){n.Authoring.resetSessionTimer();var f=new r(i);return f.addToPath(t.superCollectionName),f.addToPath(t.collectionName),f.addToPath("structure"),f.addParameters(u),$.ajax({type:"GET",cache:!1,dataType:"json",url:f.url})}function ot(u){n.Authoring.resetSessionTimer();var f=new r(i);return f.addToPath(t.superCollectionName),f.addToPath(t.collectionName),f.addToPath("data"),$.ajax({type:"POST",cache:!1,contentType:"application/json",dataType:"json",url:f.url,data:JSON.stringify(u)})}function st(u,f){if(typeof u=="undefined"||typeof f=="undefined")return!1;n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),e.addToPath(u),$.ajax({type:"POST",cache:!1,contentType:"application/json",dataType:"json",url:e.url,data:JSON.stringify(f)})}function ht(u,f,e){n.Authoring.resetSessionTimer();var o=new r(i);return o.addToPath(u),typeof t.collectionName!="undefined"&&o.addToPath(f),$.ajax({type:"PUT",cache:!1,contentType:"application/json",dataType:"json",url:o.url,data:JSON.stringify(e)})}function ct(){if(typeof t.collectionName=="undefined")return!1;n.Authoring.resetSessionTimer();var u=new r(i);return u.addToPath(t.superCollectionName),u.addToPath(t.collectionName),$.ajax({type:"DELETE",cache:!1,contentType:"application/json",url:u.url})}function lt(f){n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&e.addToPath(t.collectionName),e.addToPath("timeline"),$.ajax({type:"PUT",cache:!1,contentType:"application/json",dataType:"json",url:e.url,data:JSON.stringify(u.timeline(f))})}function at(f){n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&e.addToPath(t.collectionName),e.addToPath("timeline"),$.ajax({type:"DELETE",cache:!1,contentType:"application/json",url:e.url,data:JSON.stringify(u.timeline(f))})}function vt(f){n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&e.addToPath(t.collectionName),e.addToPath("exhibit"),$.ajax({type:"PUT",cache:!1,contentType:"application/json",dataType:"json",url:e.url,data:JSON.stringify(u.exhibitWithContentItems(f))})}function yt(f){n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&e.addToPath(t.collectionName),e.addToPath("exhibit"),$.ajax({type:"DELETE",cache:!1,contentType:"application/json",url:e.url,data:JSON.stringify(u.exhibit(f))})}function f(f){n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&e.addToPath(t.collectionName),e.addToPath("contentitem"),$.ajax({type:"PUT",cache:!1,contentType:"application/json",dataType:"json",url:e.url,data:JSON.stringify(u.contentItem(f))})}function e(f){n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),e.addToPath(t.collectionName),e.addToPath("contentitem"),$.ajax({type:"DELETE",cache:!1,contentType:"application/json",url:e.url,data:JSON.stringify(u.contentItem(f))})}function pt(f){n.Authoring.resetSessionTimer();var e=new r(i);return e.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&e.addToPath(t.collectionName),e.addToPath("tour2"),$.ajax({type:"PUT",cache:!1,contentType:"application/json",dataType:"json",url:e.url,data:JSON.stringify(u.tour(f))})}function wt(u){n.Authoring.resetSessionTimer();var f=new r(i);return f.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&f.addToPath(t.collectionName),f.addToPath("tour"),$.ajax({type:"DELETE",cache:!1,contentType:"application/json",dataType:"json",url:f.url,data:JSON.stringify({id:u})})}function bt(r){if(typeof r=="undefined")throw"getTour(tourGUID) requires a parameter.";if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)==!1)throw"getTour(tourGUID) has an invalid parameter. The provided parameter must be a GUID.";n.Authoring.resetSessionTimer();var u=new t.Request(i);return u.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&u.addToPath(t.collectionName),u.addToPath("tour"),u.addParameter("guid",r),$.ajax({type:"GET",cache:!1,url:u.url,dataType:"json"})}function kt(){n.Authoring.resetSessionTimer();var r=new t.Request(i);return r.addToPath(t.superCollectionName),typeof t.collectionName!="undefined"&&r.addToPath(t.collectionName),r.addToPath("tours"),$.ajax({type:"GET",cache:!1,dataType:"json",url:r.url})}function dt(){n.Authoring.resetSessionTimer();var r=new t.Request(i);return r.addToPath("search"),r.addToPath("scope"),r.addToPath("options"),$.ajax({type:"GET",cache:!0,dataType:"json",url:r.url})}function gt(r,u){var f,e;return u!==parseInt(u)&&(u=1),u<1&&(u=1),n.Authoring.resetSessionTimer(),f=new t.Request(i),f.addToPath("Search"),e={supercollection:n.Service.superCollectionName,collection:n.Service.collectionName,searchTerm:r,searchScope:u},$.ajax({type:"GET",cache:!1,contentType:"application/json",dataType:"json",url:f.url,data:e})}function ni(r,u,f){var e,o;return typeof u=="undefined"&&(u=n.Settings.defaultBingSearchTop),typeof f=="undefined"&&(f=n.Settings.defaultBingSearchSkip),e=new t.Request(i),e.addToPath("bing/getImages"),o={query:r,top:u,skip:f},$.ajax({type:"GET",cache:!1,contentType:"application/json",dataType:"json",url:e.url,data:o,success:function(){}})}function ti(r,u,f){var e,o;return typeof u=="undefined"&&(u=n.Settings.defaultBingSearchTop),typeof f=="undefined"&&(f=n.Settings.defaultBingSearchSkip),e=new t.Request(i),e.addToPath("bing/getVideos"),o={query:r,top:u,skip:f},$.ajax({type:"GET",cache:!1,contentType:"application/json",dataType:"json",url:e.url,data:o,success:function(){}})}function ii(r,u,f,e){var o,s;return typeof u=="undefined"&&(u=undefined),typeof f=="undefined"&&(f=n.Settings.defaultBingSearchTop),typeof e=="undefined"&&(e=n.Settings.defaultBingSearchSkip),o=new t.Request(i),o.addToPath("bing/getDocuments"),s={query:r,doctype:u,top:f,skip:e},$.ajax({type:"GET",cache:!1,contentType:"application/json",dataType:"json",url:o.url,data:s,success:function(){}})}function ri(){n.Authoring.resetSessionTimer();var t=new r(i);return t.addToPath("info"),$.ajax({type:"GET",cache:!1,dataType:"json",url:t.url})}function ui(r){n.Authoring.resetSessionTimer();var u=new t.Request(i);return u.addToPath(t.superCollectionName),u.addToPath(t.collectionName),u.addToPath(r),u.addToPath("contentpath"),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function fi(t,i){n.Authoring.resetSessionTimer();var r=t.contentItems.map(function(n){return n.guid}),u=t.contentItems.map(function(n){return f(n).then(function(t){n.id=n.guid=t})}).concat(i.filter(function(n){return n.guid&&r.indexOf(n.guid)===-1}).map(function(n){return e(n)}));return $.when.apply($,u)}function ei(r,u){var f,e;return n.Authoring.resetSessionTimer(),f=new t.Request(i),f.addToPath("user"),e={DisplayName:r,Email:u},$.ajax({type:"PUT",cache:!1,contentType:"application/json",url:f.url,data:JSON.stringify(e)})}function oi(r){var u,f;return n.Authoring.resetSessionTimer(),u=new t.Request(i),u.addToPath("user"),f={DisplayName:r},$.ajax({type:"DELETE",cache:!1,contentType:"application/json",url:u.url,data:JSON.stringify(f)})}function si(r){typeof r=="undefined"&&(r=h?"anonymous":"");n.Authoring.resetSessionTimer();var u=new t.Request(i);return u.addToPath("user"),r!=""&&u.addParameter("name",r),$.ajax({type:"GET",cache:!1,contentType:"application/json",url:u.url}).done(function(n){return n.id?n:null})}function hi(r){var f="",u;return(n.Authoring.resetSessionTimer(),u=new t.Request(i),u.addToPath("mimetypebyurl"),r=="")?f:(u.addParameter("url",r),$.ajax({type:"GET",cache:!1,contentType:"application/json",url:u.url,async:!1}).done(function(n){n&&(f=n)}),f)}function ci(r,u){var e,f;return typeof r=="undefined"&&(r=t.superCollectionName),typeof u=="undefined"&&(u=t.collectionName),e="",n.Authoring.resetSessionTimer(),f=new t.Request(i),f.addToPath("usertimelines"),f.addParameter("superCollection",r),f.addParameter("Collection",u),$.ajax({type:"GET",cache:!1,dataType:"json",url:o?s:f.url})}function li(r){typeof r!="boolean"&&(r=!1);n.Authoring.resetSessionTimer();var u=new t.Request(i);return u.addToPath("editabletimelines"),u.addParameter("includeMine",r),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function ai(r){typeof r!="boolean"&&(r=!1);n.Authoring.resetSessionTimer();var u=new t.Request(i);return u.addToPath("editablecollections"),u.addParameter("includeMine",r),u.addParameter("currentSuperCollection",t.superCollectionName),u.addParameter("currentCollection",t.collectionName),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function vi(r){$.isNumeric(r)||(r=6);n.Authoring.resetSessionTimer();var u=new t.Request(i);return u.addToPath("recentlyupdatedexhibits"),u.addParameter("quantity",r),$.ajax({type:"GET",cache:!1,dataType:"json",url:u.url})}function yi(){n.Authoring.resetSessionTimer();var r=new t.Request(i);return r.addToPath("userfavorites"),r.addParameter("currentSuperCollection",t.superCollectionName),r.addParameter("currentCollection",t.collectionName),$.ajax({type:"GET",cache:!1,dataType:"json",url:r.url})}function pi(r){var u;return(n.Authoring.resetSessionTimer(),u=new t.Request(i),u.addToPath("userfavorites"),r=="")?null:(u.addToPath(r),$.ajax({type:"DELETE",cache:!1,contentType:"application/json",url:u.url}))}function wi(r){var u;return(n.Authoring.resetSessionTimer(),u=new t.Request(i),u.addToPath("userfavorites"),r=="")?null:(u.addToPath(r),$.ajax({type:"PUT",cache:!1,contentType:"application/json",url:u.url}))}function bi(r,u,f){n.Authoring.resetSessionTimer();var e=new t.Request(i);return e.addToPath("triples"),$.ajax({type:"PUT",cache:!1,contentType:"application/json",url:e.url,data:JSON.stringify({Subject:r,Predicate:u,Object:f})})}function ki(r,u,f){if(typeof u=="undefined"&&(u=null),typeof f=="undefined"&&(f=null),r==null&&u==null&&f==null)throw"Arguments error: all three criteria cannot be null at the same time";n.Authoring.resetSessionTimer();var e=new t.Request(i);return e.addToPath("triples"),r!=null&&e.addParameter("subject",encodeURIComponent(r)),u!=null&&e.addParameter("predicate",encodeURIComponent(u)),f!=null&&e.addParameter("object",encodeURIComponent(f)),$.ajax({type:"GET",cache:!1,contentType:"application/json",url:e.url})}function di(r,u,f){n.Authoring.resetSessionTimer();var e=new t.Request(i);return e.addToPath("triples"),$.ajax({type:"DELETE",cache:!1,contentType:"application/json",url:e.url,data:JSON.stringify({Subject:r,Predicate:u,Object:f})})}function gi(){n.Authoring.resetSessionTimer();var r=new t.Request(i);return r.addToPath("triples"),r.addToPath("prefixes"),$.ajax({type:"GET",cache:!1,contentType:"application/json",url:r.url})}var u;(function(t){function i(n){return{name:n.Title,url:n.NavigationUrl,lapseTime:n.LapseTime,description:n.Description}}function r(n){for(var r=new Array(n.Stops.length),t=0,u=n.Stops.length;t<u;t++)r[t]=i(n.Stops[t]);return{id:n.Id,name:n.Title,description:n.Description,audio:n.Audio,category:n.Category,sequence:n.Sequence,bookmarks:r}}function u(t){return{id:t.guid,ParentTimelineId:t.parent.guid,start:n.Dates.getDecimalYearFromCoordinate(t.x),FromIsCirca:t.FromIsCirca,end:typeof t.endDate!="undefined"?t.endDate:n.Dates.getDecimalYearFromCoordinate(t.x+t.width),ToIsCirca:typeof t.endDate!="undefined"?t.ToIsCirca:!1,title:t.title,Regime:t.regime,backgroundUrl:t.backgroundUrl,Height:t.Height,offsetY:t.offsetY,aspectRatio:t.aspectRatio}}function f(n){return{id:n.guid,ParentTimelineId:n.parent.guid,time:n.infodotDescription.date,IsCirca:n.infodotDescription.isCirca,title:n.title,offsetY:n.offsetY,description:undefined,contentItems:undefined}}function e(n){var i=[];return $(n.contentItems).each(function(n,r){i.push(t.contentItem(r))}),{id:n.guid,ParentTimelineId:n.parent.guid,time:n.infodotDescription.date,IsCirca:n.infodotDescription.isCirca,title:n.title,offsetY:n.offsetY,description:undefined,contentItems:i}}function o(n){return{id:n.guid,ParentExhibitId:n.contentItem?n.contentItem.ParentExhibitId:n.ParentExhibitId,title:n.contentItem?n.contentItem.title:n.title,description:n.contentItem?n.contentItem.description:n.description,uri:n.contentItem?n.contentItem.uri:n.uri,mediaType:n.contentItem?n.contentItem.mediaType:n.mediaType,attribution:n.contentItem?n.contentItem.attribution:n.attribution,mediaSource:n.contentItem?n.contentItem.mediaSource:n.mediaSource,order:n.contentItem?n.contentItem.order:n.order}}t.tour=r;t.timeline=u;t.exhibit=f;t.exhibitWithContentItems=e;t.contentItem=o})(u||(u={}));var i=n.Settings.serverUrlHost+"/api/",o=constants.environment==="Localhost",s="/dumps/home/timelines.json",h=!1;t.MakeSecureUri=c;t.Request=r;t.superCollectionName="";t.collectionName="";t.canEdit=!1;t.exportTimelines=l;t.importTimelines=a;t.exportExhibit=v;t.importExhibit=y;t.importCollection=p;t.getRootTimelineId=w;t.getTimelines=b;t.getSuperCollections=k;t.getCollections=d;t.getCollection=g;t.isUniqueCollectionName=nt;t.getExhibitLastUpdate=tt;t.findUsers=it;t.getCanEdit=rt;t.getMembers=ut;t.putMembers=ft;t.getStructure=et;t.postData=ot;t.postCollection=st;t.putCollection=ht;t.deleteCollection=ct;t.putTimeline=lt;t.deleteTimeline=at;t.putExhibit=vt;t.deleteExhibit=yt;t.putContentItem=f;t.deleteContentItem=e;t.putTour2=pt;t.deleteTour=wt;t.getTour=bt;t.getTours=kt;t.getSearchScopeOptions=dt;t.getSearch=gt;t.getBingImages=ni;t.getBingVideos=ti;t.getBingDocuments=ii;t.getServiceInformation=ri;t.getContentPath=ui;t.putExhibitContent=fi;t.putProfile=ei;t.deleteProfile=oi;t.getProfile=si;t.getMimeTypeByUrl=hi;t.getUserTimelines=ci;t.getEditableTimelines=li;t.getEditableCollections=ai;t.getRecentlyUpdatedExhibits=vi;t.getUserFavorites=yi;t.deleteUserFavorite=pi;t.putUserFavorite=wi;t.putTriplet=bi;t.getTriplets=ki;t.deleteTriplet=di;t.getPrefixes=gi})(n.Service||(n.Service={}));var t=n.Service})(CZ||(CZ={}));
//# sourceMappingURL=service.min.js.map
